# CardNews AI Generator - ê°œë°œ ë¬¸ì„œ

**Last Updated**: 2025-10-25

## ğŸ“¢ ìµœê·¼ ì—…ë°ì´íŠ¸

### âœ… Phase 1 ì™„ë£Œ (2025ë…„ 10ì›”)

#### ğŸŒ ë‹¤êµ­ì–´ ì§€ì›
- ì˜ì–´, í•œêµ­ì–´, ì¼ë³¸ì–´ ìë™ ê°ì§€
- ì–¸ì–´ë³„ ì‹œìŠ¤í…œ ë©”ì‹œì§€ ë¶„ë¦¬
- ì›ë¬¸ ì–¸ì–´ë¡œ ìš”ì•½/í‚¤ì›Œë“œ/ì¹´ë“œë‰´ìŠ¤ ìƒì„±

#### ğŸ”— ë‹¤ì¤‘ URL ì…ë ¥
- ì—¬ëŸ¬ URLì„ ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥
- ìë™ìœ¼ë¡œ ëª¨ë“  URL ìŠ¤í¬ë˜í•‘ ë° í†µí•©
- ì¶œì²˜ë³„ ëª…í™•í•œ êµ¬ë¶„ì„ 

#### ğŸ¤– AI ëª¨ë¸ ì„ íƒ
- GPT-4.1 Nano (ê¸°ë³¸) - $0.10/1M
- GPT-4.1 Mini - $0.15/1M
- GPT-5 Nano - $0.20/1M
- GPT-5 Mini - $0.25/1M

#### ğŸ’¬ ìì—°ì–´ ì²˜ë¦¬ ëŒ€í­ ê°œì„ 
- Function Call í†µí•© (modify_all_content)
- ë¬´ì œí•œ ìì—°ì–´ ëª…ë ¹ ì§€ì›
- "ì¡´ëŒ“ë§ë¡œ ë°”ê¿”ì¤˜" ë“± ììœ ë¡œìš´ ìˆ˜ì •
- í”„ë¡¬í”„íŠ¸ ê°•í™” (Before/After ì˜ˆì‹œ)

#### ğŸ¨ UI/UX ê°œì„ 
- í…ìŠ¤íŠ¸ ì…ë ¥ ê°€ì‹œì„± ê°œì„ 
- AI ëª¨ë¸ ì¹´ë“œ ì„ íƒ UI
- OpenAI ì—°ê²° ìƒíƒœ í‘œì‹œ
- ì¹´ë“œ ì‹œì‘ ì˜µì…˜ (ì œëª©/ë‚´ìš©)

#### ğŸš€ í”„ë¡œë•ì…˜ ë°°í¬
- Frontend: Vercel
- Backend: Render
- CORS ì™€ì¼ë“œì¹´ë“œ (ëª¨ë“  Vercel URL)

---

### ğŸ†• Phase 2 ê³„íš (RSS Core Features) - 2025ë…„ 10ì›”

**RSS í¬ë¡¤ë§ ë° ìë™ ìƒì„± í•µì‹¬ ê¸°ëŠ¥ë§Œ (ìµœëŒ€ ë‹¨ìˆœí™”)**

#### ì£¼ìš” ëª©í‘œ
- ğŸ“¡ **RSS ì „ìš©**: RSS í”¼ë“œê°€ ìˆëŠ” ì‚¬ì´íŠ¸ë§Œ ì§€ì› (ë¹ ë¥¸ ê°œë°œ)
- ğŸ’¾ **DB í†µí•©**: ëª¨ë“  í”„ë¡œì íŠ¸ Firestoreì— ì˜êµ¬ ì €ì¥ (3ê°œ ì»¬ë ‰ì…˜)
- ğŸ¯ **í•µì‹¬ í”Œë¡œìš°**: RSS í¬ë¡¤ë§ â†’ ì¹´ë“œë‰´ìŠ¤ ìƒì„± â†’ DB ì €ì¥
- âš¡ **ê°œë°œ ê¸°ê°„**: **2-3ì£¼** (ì¸ì¦/ì•Œë¦¼ ì œì™¸)
- ğŸš« **ì œì™¸**: ì´ë©”ì¼ ì•Œë¦¼, ì‚¬ìš©ì ì¸ì¦ (Phase 3ë¡œ ì´ë™)

#### íƒ€ê²Ÿ ì‚¬ì´íŠ¸ (RSS ì§€ì›)
1. https://blogs.microsoft.com/ (RSS: /feed/)
2. https://www.microsoft.com/en-us/security (RSS í™•ì¸)
3. ê¸°íƒ€ RSS ì§€ì› ê¸°ìˆ  ë¸”ë¡œê·¸

#### í•µì‹¬ ê¸°ëŠ¥ (4ê°œ)
1. **RSS í¬ë¡¤ë§ ì‹œìŠ¤í…œ**: `feedparser` ì‚¬ìš©
2. **ìë™ ìƒì„± íŒŒì´í”„ë¼ì¸**: ì‚¬ìš©ì ê°œì… ì—†ì´ ì™„ì „ ìë™
3. **í”„ë¡œì íŠ¸ ê´€ë¦¬**: ì €ì¥, ìˆ˜ì •, ë²„ì „ ê´€ë¦¬
4. **ë©”ì¸ ëŒ€ì‹œë³´ë“œ**: 3ê°œ ë©”ë‰´ (RSS ì„¤ì • / Phase 1 / í”„ë¡œì íŠ¸)

**ìƒì„¸ ê°œë°œ ê³„íš**: [PHASE2_SPEC.md](../PHASE2_SPEC.md) ì°¸ì¡°

---

### ğŸ“Œ Phase 3 ê³„íš (Auth, Notification & Design) - ë¯¸ë˜

**ì¸ì¦, ì•Œë¦¼ ë° ë””ìì¸ ê¸°ëŠ¥ ì¶”ê°€**

#### ì¶”ê°€ ê¸°ëŠ¥
1. **ì‚¬ìš©ì ì¸ì¦**: Firebase Auth (ì´ë©”ì¼, Google, GitHub)
2. **ì´ë©”ì¼ ì•Œë¦¼**: SendGrid í†µí•©, ì‚¬ìš©ìë³„ ì´ë©”ì¼ ê´€ë¦¬
3. **ì›¹ ìŠ¤í¬ë˜í•‘**: Playwrightë¡œ RSS ì—†ëŠ” ì‚¬ì´íŠ¸ í¬ë¡¤ë§
4. **ë””ìì¸ ì‹œìŠ¤í…œ**: í…œí”Œë¦¿, ìƒ‰ìƒ, í°íŠ¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•
5. **ì´ë¯¸ì§€ í†µí•©**: AI ì´ë¯¸ì§€ ìƒì„± ë° í¸ì§‘
6. **ë‚´ë³´ë‚´ê¸°**: PNG, PDF í˜•ì‹ ë‹¤ìš´ë¡œë“œ
7. **íŒ€ í˜‘ì—…**: í”„ë¡œì íŠ¸ ê³µìœ  ë° ëŒ“ê¸€

---

## ëª©ì°¨
1. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#1-í”„ë¡œì íŠ¸-êµ¬ì¡°)
2. [ê°œë°œ í™˜ê²½ ì„¤ì •](#2-ê°œë°œ-í™˜ê²½-ì„¤ì •)
3. [Backend ìƒì„¸ ì„¤ê³„](#3-backend-ìƒì„¸-ì„¤ê³„)
4. [Frontend ìƒì„¸ ì„¤ê³„](#4-frontend-ìƒì„¸-ì„¤ê³„)
5. [AI í†µí•© ê°€ì´ë“œ](#5-ai-í†µí•©-ê°€ì´ë“œ)
6. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#6-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
7. [API ìƒì„¸ ëª…ì„¸](#7-api-ìƒì„¸-ëª…ì„¸)
8. [ë°°í¬ ê°€ì´ë“œ](#8-ë°°í¬-ê°€ì´ë“œ)
9. [í…ŒìŠ¤íŠ¸ ì „ëµ](#9-í…ŒìŠ¤íŠ¸-ì „ëµ)
10. [ë³´ì•ˆ ê³ ë ¤ì‚¬í•­](#10-ë³´ì•ˆ-ê³ ë ¤ì‚¬í•­)

---

## 1. í”„ë¡œì íŠ¸ êµ¬ì¡°

### 1.1 ì „ì²´ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
CardNews/
â”œâ”€â”€ backend/                      # Python FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py              # FastAPI ì•± ì§„ì…ì 
â”‚   â”‚   â”œâ”€â”€ config.py            # í™˜ê²½ ë³€ìˆ˜ ë° ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ models/              # Pydantic ëª¨ë¸
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ project.py
â”‚   â”‚   â”‚   â”œâ”€â”€ section.py
â”‚   â”‚   â”‚   â””â”€â”€ chat.py
â”‚   â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ scraper.py       # ì›¹ ìŠ¤í¬ë˜í•‘
â”‚   â”‚   â”‚   â”œâ”€â”€ summarizer.py    # AI ìš”ì•½
â”‚   â”‚   â”‚   â”œâ”€â”€ card_generator.py # ì¹´ë“œ ìƒì„±
â”‚   â”‚   â”‚   â””â”€â”€ chat_service.py  # AI ì±„íŒ…
â”‚   â”‚   â”œâ”€â”€ routers/             # API ë¼ìš°í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ projects.py
â”‚   â”‚   â”‚   â”œâ”€â”€ sections.py
â”‚   â”‚   â”‚   â””â”€â”€ chat.py
â”‚   â”‚   â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ firebase.py      # Firebase ì—°ë™
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.py
â”‚   â”‚   â”‚   â””â”€â”€ prompts.py       # AI í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
â”‚   â”‚   â””â”€â”€ tests/               # ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ test_scraper.py
â”‚   â”‚       â”œâ”€â”€ test_summarizer.py
â”‚   â”‚       â””â”€â”€ test_api.py
â”‚   â”œâ”€â”€ requirements.txt         # Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ .env.example            # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”‚   â””â”€â”€ Dockerfile              # Docker ì„¤ì • (ì„ íƒ)
â”‚
â”œâ”€â”€ frontend/                    # React/Next.js í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/          # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LoadingSpinner.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ source/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SourceInput.tsx      # Step 1: ì†ŒìŠ¤ ì…ë ¥
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UrlValidator.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ summary/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SummaryView.tsx      # Step 2: ìš”ì•½ í‘œì‹œ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ KeywordBadges.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ cardnews/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CardList.tsx         # Step 3: ì¹´ë“œ ëª©ë¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CardPreview.tsx      # ê°œë³„ ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CardEditor.tsx
â”‚   â”‚   â”‚   â””â”€â”€ chat/
â”‚   â”‚   â”‚       â”œâ”€â”€ ChatInterface.tsx    # AI ì±„íŒ… UI
â”‚   â”‚   â”‚       â””â”€â”€ MessageBubble.tsx
â”‚   â”‚   â”œâ”€â”€ pages/               # Next.js í˜ì´ì§€
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx        # í™ˆ/í”„ë¡œì íŠ¸ ìƒì„±
â”‚   â”‚   â”‚   â”œâ”€â”€ project/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id].tsx     # í”„ë¡œì íŠ¸ ìƒì„¸
â”‚   â”‚   â”‚   â””â”€â”€ _app.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/               # ì»¤ìŠ¤í…€ í›…
â”‚   â”‚   â”‚   â”œâ”€â”€ useProject.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useChat.ts
â”‚   â”‚   â”‚   â””â”€â”€ useFirebase.ts
â”‚   â”‚   â”œâ”€â”€ services/            # API í†µì‹ 
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts           # Axios ì„¤ì •
â”‚   â”‚   â”‚   â”œâ”€â”€ projectService.ts
â”‚   â”‚   â”‚   â””â”€â”€ chatService.ts
â”‚   â”‚   â”œâ”€â”€ store/               # ìƒíƒœ ê´€ë¦¬ (Zustand)
â”‚   â”‚   â”‚   â”œâ”€â”€ projectStore.ts
â”‚   â”‚   â”‚   â””â”€â”€ uiStore.ts
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”‚   â””â”€â”€ globals.css      # Tailwind CSS
â”‚   â”‚   â”œâ”€â”€ types/               # TypeScript íƒ€ì…
â”‚   â”‚   â”‚   â”œâ”€â”€ project.ts
â”‚   â”‚   â”‚   â””â”€â”€ section.ts
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ firebase.ts      # Firebase ì´ˆê¸°í™”
â”‚   â”‚       â””â”€â”€ constants.ts
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ next.config.js
â”‚   â””â”€â”€ .env.local.example
â”‚
â”œâ”€â”€ docs/                        # ì¶”ê°€ ë¬¸ì„œ
â”‚   â”œâ”€â”€ API.md
â”‚   â””â”€â”€ DEPLOYMENT.md
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ PRD.md                       # ì œí’ˆ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ
â””â”€â”€ ê°œë°œë¬¸ì„œ.md                  # ì´ ë¬¸ì„œ
```

---

## 2. ê°œë°œ í™˜ê²½ ì„¤ì •

### 2.1 í•„ìˆ˜ ë„êµ¬ ì„¤ì¹˜

| ë„êµ¬ | ë²„ì „ | ì„¤ì¹˜ ëª…ë ¹ |
|------|------|-----------|
| **Python** | 3.11+ | `brew install python@3.11` (macOS) |
| **Node.js** | 18+ | `brew install node` |
| **Firebase CLI** | ìµœì‹  | `npm install -g firebase-tools` |
| **Git** | ìµœì‹  | `brew install git` |

### 2.2 Backend í™˜ê²½ ì„¤ì •

#### Step 1: ê°€ìƒí™˜ê²½ ìƒì„±
```bash
cd backend
python -m venv venv
source venv/bin/activate  # macOS/Linux
# Windows: venv\Scripts\activate
```

#### Step 2: ì˜ì¡´ì„± ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

#### Step 3: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env` íŒŒì¼ ìƒì„± (`.env.example` ì°¸ê³ ):
```env
# OpenAI API
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4o-mini

# Firebase
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_PRIVATE_KEY_PATH=./serviceAccountKey.json

# Backend ì„¤ì •
BACKEND_PORT=8000
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# ê¸°íƒ€
MAX_TEXT_LENGTH=10000
DEBUG=True
```

### 2.3 Frontend í™˜ê²½ ì„¤ì •

#### Step 1: ì˜ì¡´ì„± ì„¤ì¹˜
```bash
cd frontend
npm install
# ë˜ëŠ”
yarn install
```

#### Step 2: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env.local` íŒŒì¼ ìƒì„±:
```env
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_FIREBASE_API_KEY=your-api-key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789
NEXT_PUBLIC_FIREBASE_APP_ID=1:123456789:web:abcdef
```

### 2.4 Firebase í”„ë¡œì íŠ¸ ì„¤ì •

#### Step 1: Firebase í”„ë¡œì íŠ¸ ìƒì„±
```bash
firebase login
firebase init
```

ì„ íƒ ì˜µì…˜:
- âœ… Hosting
- âœ… Firestore
- âœ… Functions (ì„ íƒì‚¬í•­)
- âœ… Storage

#### Step 2: Firestore ë³´ì•ˆ ê·œì¹™ ì„¤ì •
`firestore.rules`:
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // í”„ë¡œì íŠ¸ ë¬¸ì„œ
    match /projects/{projectId} {
      allow read, write: if true; // Phase 1: ì¸ì¦ ì—†ìŒ
      // Phase 2: allow read, write: if request.auth != null;
      
      // ì¹´ë“œ ì„¹ì…˜ í•˜ìœ„ ì»¬ë ‰ì…˜
      match /sections/{sectionId} {
        allow read, write: if true;
      }
      
      // ëŒ€í™” ì´ë ¥ í•˜ìœ„ ì»¬ë ‰ì…˜
      match /conversations/{conversationId} {
        allow read, write: if true;
      }
    }
  }
}
```

---

## 3. Backend ìƒì„¸ ì„¤ê³„

### 3.1 FastAPI ì•± êµ¬ì¡°

#### `main.py` - ì•± ì§„ì…ì 
```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from app.config import settings
from app.routers import projects, sections, chat

# FastAPI ì•± ì´ˆê¸°í™”
app = FastAPI(
    title="CardNews AI API",
    description="AI ê¸°ë°˜ ì¹´ë“œë‰´ìŠ¤ ìƒì„± API",
    version="1.0.0"
)

# CORS ì„¤ì •
app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.ALLOWED_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# ë¼ìš°í„° ë“±ë¡
app.include_router(projects.router, prefix="/api/projects", tags=["projects"])
app.include_router(sections.router, prefix="/api/sections", tags=["sections"])
app.include_router(chat.router, prefix="/api/chat", tags=["chat"])

@app.get("/")
async def root():
    return {"message": "CardNews AI API", "version": "1.0.0"}

@app.get("/health")
async def health_check():
    return {"status": "healthy"}
```

### 3.2 í•µì‹¬ ì„œë¹„ìŠ¤ ëª¨ë“ˆ

#### `services/scraper.py` - ì›¹ ìŠ¤í¬ë˜í•‘
```python
from bs4 import BeautifulSoup
import requests
from newspaper import Article
from typing import Dict, Optional

class WebScraper:
    """ì›¹ í˜ì´ì§€ì—ì„œ ë³¸ë¬¸ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ëŠ” ì„œë¹„ìŠ¤"""
    
    def __init__(self):
        self.headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
        }
    
    def scrape_url(self, url: str) -> Dict[str, str]:
        """
        URLì—ì„œ ì œëª©ê³¼ ë³¸ë¬¸ì„ ì¶”ì¶œ
        
        Args:
            url: ìŠ¤í¬ë˜í•‘í•  ì›¹ í˜ì´ì§€ URL
            
        Returns:
            {'title': str, 'content': str, 'authors': list, 'publish_date': str}
        """
        try:
            # newspaper3k ì‚¬ìš© (ë‰´ìŠ¤ ê¸°ì‚¬ì— ìµœì í™”)
            article = Article(url, language='ko')
            article.download()
            article.parse()
            
            return {
                'title': article.title,
                'content': article.text,
                'authors': article.authors,
                'publish_date': str(article.publish_date) if article.publish_date else None,
                'top_image': article.top_image
            }
        except Exception as e:
            # Fallback: BeautifulSoup ì‚¬ìš©
            return self._fallback_scrape(url)
    
    def _fallback_scrape(self, url: str) -> Dict[str, str]:
        """newspaper3k ì‹¤íŒ¨ ì‹œ BeautifulSoupìœ¼ë¡œ ìŠ¤í¬ë˜í•‘"""
        response = requests.get(url, headers=self.headers, timeout=10)
        soup = BeautifulSoup(response.text, 'html.parser')
        
        # ì œëª© ì¶”ì¶œ
        title = soup.find('h1')
        title_text = title.get_text().strip() if title else "ì œëª© ì—†ìŒ"
        
        # ë³¸ë¬¸ ì¶”ì¶œ (ì¼ë°˜ì ì¸ article íƒœê·¸ ìš°ì„ )
        article = soup.find('article')
        if article:
            paragraphs = article.find_all('p')
        else:
            paragraphs = soup.find_all('p')
        
        content = '\n'.join([p.get_text().strip() for p in paragraphs])
        
        return {
            'title': title_text,
            'content': content,
            'authors': [],
            'publish_date': None,
            'top_image': None
        }
```

#### `services/summarizer.py` - AI ìš”ì•½
```python
from openai import OpenAI
from typing import Dict, List
from app.config import settings
from app.utils.prompts import SUMMARIZE_PROMPT, KEYWORD_EXTRACTION_PROMPT

class AISummarizer:
    """OpenAI APIë¥¼ ì‚¬ìš©í•œ í…ìŠ¤íŠ¸ ìš”ì•½ ì„œë¹„ìŠ¤"""
    
    def __init__(self):
        self.client = OpenAI(api_key=settings.OPENAI_API_KEY)
        self.model = settings.OPENAI_MODEL
    
    def summarize(self, text: str, max_length: int = 200) -> Dict:
        """
        í…ìŠ¤íŠ¸ë¥¼ ìš”ì•½í•˜ê³  í‚¤ì›Œë“œ ì¶”ì¶œ
        
        Args:
            text: ìš”ì•½í•  ì›ë³¸ í…ìŠ¤íŠ¸
            max_length: ìš”ì•½ë¬¸ ìµœëŒ€ ê¸¸ì´
            
        Returns:
            {
                'summary': str,          # í•µì‹¬ ìš”ì•½
                'keywords': List[str],   # ì£¼ìš” í‚¤ì›Œë“œ
                'card_count': int        # ì¶”ì²œ ì¹´ë“œ ìˆ˜
            }
        """
        # 1. í•µì‹¬ ìš”ì•½ ìƒì„±
        summary = self._generate_summary(text, max_length)
        
        # 2. í‚¤ì›Œë“œ ì¶”ì¶œ
        keywords = self._extract_keywords(text)
        
        # 3. ì¹´ë“œ ìˆ˜ ì¶”ì²œ (í…ìŠ¤íŠ¸ ê¸¸ì´ ê¸°ë°˜)
        card_count = self._recommend_card_count(text)
        
        return {
            'summary': summary,
            'keywords': keywords,
            'card_count': card_count
        }
    
    def _generate_summary(self, text: str, max_length: int) -> str:
        """GPTë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì•½ ìƒì„±"""
        prompt = SUMMARIZE_PROMPT.format(text=text, max_length=max_length)
        
        response = self.client.chat.completions.create(
            model=self.model,
            messages=[
                {"role": "system", "content": "ë‹¹ì‹ ì€ ì „ë¬¸ ì½˜í…ì¸  ìš”ì•½ ì „ë¬¸ê°€ì…ë‹ˆë‹¤."},
                {"role": "user", "content": prompt}
            ],
            temperature=0.3,  # ì¼ê´€ì„± ìˆëŠ” ìš”ì•½ì„ ìœ„í•´ ë‚®ì€ ì˜¨ë„
            max_tokens=500
        )
        
        return response.choices[0].message.content.strip()
    
    def _extract_keywords(self, text: str, count: int = 5) -> List[str]:
        """GPTë¥¼ ì‚¬ìš©í•˜ì—¬ í‚¤ì›Œë“œ ì¶”ì¶œ"""
        prompt = KEYWORD_EXTRACTION_PROMPT.format(text=text, count=count)
        
        response = self.client.chat.completions.create(
            model=self.model,
            messages=[
                {"role": "system", "content": "ë‹¹ì‹ ì€ í‚¤ì›Œë“œ ì¶”ì¶œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤."},
                {"role": "user", "content": prompt}
            ],
            temperature=0.3,
            max_tokens=100
        )
        
        keywords_text = response.choices[0].message.content.strip()
        # ì‰¼í‘œë¡œ êµ¬ë¶„ëœ í‚¤ì›Œë“œë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜
        keywords = [k.strip() for k in keywords_text.split(',')]
        
        return keywords[:count]
    
    def _recommend_card_count(self, text: str) -> int:
        """í…ìŠ¤íŠ¸ ê¸¸ì´ì— ë”°ë¼ ì¹´ë“œ ìˆ˜ ì¶”ì²œ"""
        length = len(text)
        
        if length < 500:
            return 3  # ì œëª© + ë‚´ìš© 1ê°œ + ë§ˆë¬´ë¦¬
        elif length < 1500:
            return 5  # ì œëª© + ë‚´ìš© 3ê°œ + ë§ˆë¬´ë¦¬
        elif length < 3000:
            return 7  # ì œëª© + ë‚´ìš© 5ê°œ + ë§ˆë¬´ë¦¬
        else:
            return 9  # ì œëª© + ë‚´ìš© 7ê°œ + ë§ˆë¬´ë¦¬
```

#### `services/card_generator.py` - ì¹´ë“œë‰´ìŠ¤ ìƒì„±
```python
from typing import List, Dict
from openai import OpenAI
from app.models.section import CardSection, CardType
from app.config import settings
from app.utils.prompts import CARD_GENERATION_PROMPT

class CardNewsGenerator:
    """AIë¥¼ ì‚¬ìš©í•˜ì—¬ ì¹´ë“œë‰´ìŠ¤ ì„¹ì…˜ ìë™ ìƒì„±"""
    
    def __init__(self):
        self.client = OpenAI(api_key=settings.OPENAI_API_KEY)
        self.model = settings.OPENAI_MODEL
    
    def generate_sections(
        self, 
        summary: str, 
        original_text: str, 
        card_count: int
    ) -> List[Dict]:
        """
        ìš”ì•½ë³¸ê³¼ ì›ë¬¸ì„ ë°”íƒ•ìœ¼ë¡œ ì¹´ë“œë‰´ìŠ¤ ì„¹ì…˜ ìƒì„±
        
        Args:
            summary: ìš”ì•½ëœ í…ìŠ¤íŠ¸
            original_text: ì›ë³¸ í…ìŠ¤íŠ¸
            card_count: ìƒì„±í•  ì¹´ë“œ ìˆ˜
            
        Returns:
            List of card sections
        """
        # GPTì—ê²Œ ì¹´ë“œë‰´ìŠ¤ êµ¬ì¡° ìƒì„± ìš”ì²­
        prompt = CARD_GENERATION_PROMPT.format(
            summary=summary,
            original_text=original_text[:3000],  # í† í° ì œí•œ ê³ ë ¤
            card_count=card_count
        )
        
        response = self.client.chat.completions.create(
            model=self.model,
            messages=[
                {
                    "role": "system", 
                    "content": "ë‹¹ì‹ ì€ ì¹´ë“œë‰´ìŠ¤ ì œì‘ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì£¼ì–´ì§„ ë‚´ìš©ì„ ì¹´ë“œë‰´ìŠ¤ í˜•ì‹ìœ¼ë¡œ êµ¬ì¡°í™”í•©ë‹ˆë‹¤."
                },
                {"role": "user", "content": prompt}
            ],
            temperature=0.5,
            max_tokens=2000
        )
        
        # ì‘ë‹µ íŒŒì‹± (JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜ë˜ë„ë¡ í”„ë¡¬í”„íŠ¸ ì„¤ê³„)
        import json
        card_data = json.loads(response.choices[0].message.content)
        
        # CardSection ëª¨ë¸ë¡œ ë³€í™˜
        sections = []
        for idx, card in enumerate(card_data['cards']):
            sections.append({
                'order': idx,
                'type': card.get('type', 'content'),
                'title': card.get('title', ''),
                'content': card.get('content', ''),
                'design_config': {
                    'background_color': '#FFFFFF',
                    'font_family': 'Pretendard',
                    'font_size': 16
                }
            })
        
        return sections
```

#### `services/chat_service.py` - AI ì±„íŒ… ë° ì„¹ì…˜ ìˆ˜ì •
```python
from typing import List, Dict
from openai import OpenAI
from app.config import settings
from app.utils.prompts import CHAT_SYSTEM_PROMPT

class ChatService:
    """AIì™€ ëŒ€í™”í•˜ë©° ì¹´ë“œë‰´ìŠ¤ ì„¹ì…˜ì„ ìˆ˜ì •í•˜ëŠ” ì„œë¹„ìŠ¤"""
    
    def __init__(self):
        self.client = OpenAI(api_key=settings.OPENAI_API_KEY)
        self.model = settings.OPENAI_MODEL
    
    def process_chat_message(
        self,
        user_message: str,
        current_sections: List[Dict],
        conversation_history: List[Dict] = None
    ) -> Dict:
        """
        ì‚¬ìš©ìì˜ ì±„íŒ… ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ê³  ì„¹ì…˜ ìˆ˜ì • ì œì•ˆ
        
        Args:
            user_message: ì‚¬ìš©ì ë©”ì‹œì§€ ("ë‘ ë²ˆì§¸ ì¹´ë“œ ë” ê°„ê²°í•˜ê²Œ í•´ì¤˜")
            current_sections: í˜„ì¬ ì¹´ë“œ ì„¹ì…˜ ìƒíƒœ
            conversation_history: ì´ì „ ëŒ€í™” ì´ë ¥
            
        Returns:
            {
                'ai_response': str,              # AIì˜ ì‘ë‹µ ë©”ì‹œì§€
                'updated_sections': List[Dict],  # ìˆ˜ì •ëœ ì„¹ì…˜ (ìˆì„ ê²½ìš°)
                'action_taken': str              # ìˆ˜í–‰í•œ ì‘ì—… ('modify', 'reorder', 'none')
            }
        """
        # ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±
        messages = [
            {"role": "system", "content": CHAT_SYSTEM_PROMPT}
        ]
        
        # ì´ì „ ëŒ€í™” ì´ë ¥ ì¶”ê°€
        if conversation_history:
            messages.extend(conversation_history[-5:])  # ìµœê·¼ 5ê°œë§Œ
        
        # í˜„ì¬ ì„¹ì…˜ ì •ë³´ í¬í•¨
        sections_context = self._format_sections_for_context(current_sections)
        messages.append({
            "role": "system",
            "content": f"í˜„ì¬ ì¹´ë“œ ì„¹ì…˜ ìƒíƒœ:\n{sections_context}"
        })
        
        # ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
        messages.append({
            "role": "user",
            "content": user_message
        })
        
        # GPT í˜¸ì¶œ
        response = self.client.chat.completions.create(
            model=self.model,
            messages=messages,
            temperature=0.7,
            max_tokens=1000,
            functions=[  # Function callingìœ¼ë¡œ ì„¹ì…˜ ìˆ˜ì • ëª…ë ¹ êµ¬ì¡°í™”
                {
                    "name": "modify_section",
                    "description": "íŠ¹ì • ì¹´ë“œ ì„¹ì…˜ì˜ ë‚´ìš©ì„ ìˆ˜ì •",
                    "parameters": {
                        "type": "object",
                        "properties": {
                            "section_index": {"type": "integer"},
                            "new_title": {"type": "string"},
                            "new_content": {"type": "string"}
                        }
                    }
                },
                {
                    "name": "reorder_sections",
                    "description": "ì¹´ë“œ ì„¹ì…˜ì˜ ìˆœì„œë¥¼ ë³€ê²½",
                    "parameters": {
                        "type": "object",
                        "properties": {
                            "new_order": {
                                "type": "array",
                                "items": {"type": "integer"}
                            }
                        }
                    }
                }
            ]
        )
        
        # ì‘ë‹µ ì²˜ë¦¬
        choice = response.choices[0]
        
        if choice.message.function_call:
            # Function callì´ ìˆìœ¼ë©´ ì„¹ì…˜ ìˆ˜ì • ìˆ˜í–‰
            return self._handle_function_call(
                choice.message.function_call,
                current_sections
            )
        else:
            # ì¼ë°˜ ëŒ€í™” ì‘ë‹µ
            return {
                'ai_response': choice.message.content,
                'updated_sections': None,
                'action_taken': 'none'
            }
    
    def _format_sections_for_context(self, sections: List[Dict]) -> str:
        """ì„¹ì…˜ ì •ë³´ë¥¼ GPTê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ í˜•ì‹ìœ¼ë¡œ í¬ë§·"""
        formatted = []
        for idx, section in enumerate(sections):
            formatted.append(
                f"ì¹´ë“œ {idx + 1} ({section['type']}):\n"
                f"  ì œëª©: {section.get('title', 'N/A')}\n"
                f"  ë‚´ìš©: {section.get('content', '')[:100]}..."
            )
        return '\n\n'.join(formatted)
    
    def _handle_function_call(self, function_call, current_sections: List[Dict]) -> Dict:
        """Function call ì²˜ë¦¬í•˜ì—¬ ì„¹ì…˜ ìˆ˜ì •"""
        import json
        
        function_name = function_call.name
        arguments = json.loads(function_call.arguments)
        
        updated_sections = current_sections.copy()
        
        if function_name == "modify_section":
            idx = arguments['section_index']
            if 0 <= idx < len(updated_sections):
                updated_sections[idx]['title'] = arguments.get('new_title', updated_sections[idx]['title'])
                updated_sections[idx]['content'] = arguments.get('new_content', updated_sections[idx]['content'])
            
            return {
                'ai_response': f"ì¹´ë“œ {idx + 1}ì˜ ë‚´ìš©ì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.",
                'updated_sections': updated_sections,
                'action_taken': 'modify'
            }
        
        elif function_name == "reorder_sections":
            new_order = arguments['new_order']
            updated_sections = [current_sections[i] for i in new_order]
            # order í•„ë“œ ì—…ë°ì´íŠ¸
            for idx, section in enumerate(updated_sections):
                section['order'] = idx
            
            return {
                'ai_response': "ì¹´ë“œ ìˆœì„œë¥¼ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.",
                'updated_sections': updated_sections,
                'action_taken': 'reorder'
            }
        
        return {
            'ai_response': "ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
            'updated_sections': None,
            'action_taken': 'none'
        }
```

### 3.3 Pydantic ëª¨ë¸ ì •ì˜

#### `models/project.py`
```python
from pydantic import BaseModel, HttpUrl, validator
from typing import Optional, List, Literal
from datetime import datetime

class ProjectCreate(BaseModel):
    """í”„ë¡œì íŠ¸ ìƒì„± ìš”ì²­"""
    source_type: Literal['url', 'text']
    source_content: str
    
    @validator('source_content')
    def validate_content_length(cls, v):
        if len(v) > 10000:
            raise ValueError('í…ìŠ¤íŠ¸ëŠ” 10,000ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')
        if len(v.strip()) == 0:
            raise ValueError('ë‚´ìš©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.')
        return v

class ProjectResponse(BaseModel):
    """í”„ë¡œì íŠ¸ ì‘ë‹µ"""
    id: str
    source_type: str
    source_content: str
    summary: Optional[str] = None
    keywords: Optional[List[str]] = None
    created_at: datetime
    updated_at: datetime
    status: Literal['draft', 'summarized', 'completed']
    
    class Config:
        from_attributes = True

class SummarizeRequest(BaseModel):
    """ìš”ì•½ ìš”ì²­"""
    max_length: int = 200

class SummarizeResponse(BaseModel):
    """ìš”ì•½ ì‘ë‹µ"""
    summary: str
    keywords: List[str]
    recommended_card_count: int
```

#### `models/section.py`
```python
from pydantic import BaseModel
from typing import Optional, Literal, Dict

class CardSection(BaseModel):
    """ì¹´ë“œ ì„¹ì…˜ ëª¨ë¸"""
    id: Optional[str] = None
    project_id: str
    order: int
    type: Literal['title', 'content', 'closing']
    title: Optional[str] = None
    content: str
    image_url: Optional[str] = None
    design_config: Dict = {
        'background_color': '#FFFFFF',
        'font_family': 'Pretendard',
        'font_size': 16
    }

class SectionCreate(BaseModel):
    """ì„¹ì…˜ ìƒì„± ìš”ì²­"""
    order: int
    type: Literal['title', 'content', 'closing']
    title: Optional[str] = None
    content: str

class SectionUpdate(BaseModel):
    """ì„¹ì…˜ ìˆ˜ì • ìš”ì²­"""
    title: Optional[str] = None
    content: Optional[str] = None
    order: Optional[int] = None
```

### 3.4 í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿

#### `utils/prompts.py`
```python
# ìš”ì•½ í”„ë¡¬í”„íŠ¸
SUMMARIZE_PROMPT = """
ë‹¤ìŒ í…ìŠ¤íŠ¸ë¥¼ {max_length}ì ì´ë‚´ë¡œ í•µì‹¬ ë‚´ìš©ë§Œ ìš”ì•½í•´ì£¼ì„¸ìš”.
ì¹´ë“œë‰´ìŠ¤ì— ì‚¬ìš©ë  ìš”ì•½ì´ë¯€ë¡œ, ëª…í™•í•˜ê³  ê°„ê²°í•˜ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”.

í…ìŠ¤íŠ¸:
{text}

ìš”ì•½:
"""

# í‚¤ì›Œë“œ ì¶”ì¶œ í”„ë¡¬í”„íŠ¸
KEYWORD_EXTRACTION_PROMPT = """
ë‹¤ìŒ í…ìŠ¤íŠ¸ì—ì„œ í•µì‹¬ í‚¤ì›Œë“œ {count}ê°œë¥¼ ì¶”ì¶œí•´ì£¼ì„¸ìš”.
ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ë‚˜ì—´í•´ì£¼ì„¸ìš”.

í…ìŠ¤íŠ¸:
{text}

í‚¤ì›Œë“œ:
"""

# ì¹´ë“œë‰´ìŠ¤ ìƒì„± í”„ë¡¬í”„íŠ¸
CARD_GENERATION_PROMPT = """
ë‹¤ìŒ ìš”ì•½ê³¼ ì›ë¬¸ì„ ë°”íƒ•ìœ¼ë¡œ {card_count}ê°œì˜ ì¹´ë“œë‰´ìŠ¤ë¥¼ ì œì‘í•´ì£¼ì„¸ìš”.

ìš”ì•½:
{summary}

ì›ë¬¸:
{original_text}

ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
{{
    "cards": [
        {{
            "type": "title",
            "title": "ì œëª©",
            "content": "ë¶€ì œëª© ë˜ëŠ” ì„¤ëª…"
        }},
        {{
            "type": "content",
            "title": "ì„¹ì…˜ ì œëª©",
            "content": "ì„¹ì…˜ ë‚´ìš© (2-3ë¬¸ì¥)"
        }},
        ...
        {{
            "type": "closing",
            "title": "ë§ˆë¬´ë¦¬ ì œëª©",
            "content": "ë§ˆë¬´ë¦¬ ë©˜íŠ¸"
        }}
    ]
}}

ê·œì¹™:
1. ì²« ë²ˆì§¸ ì¹´ë“œëŠ” ë°˜ë“œì‹œ "title" íƒ€ì…
2. ë§ˆì§€ë§‰ ì¹´ë“œëŠ” ë°˜ë“œì‹œ "closing" íƒ€ì…
3. ë‚˜ë¨¸ì§€ëŠ” "content" íƒ€ì…
4. ê° ì¹´ë“œì˜ ë‚´ìš©ì€ ê°„ê²°í•˜ê³  ëª…í™•í•˜ê²Œ
5. ì œëª©ì€ 10ì ì´ë‚´, ë‚´ìš©ì€ 100ì ì´ë‚´
"""

# ì±„íŒ… ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
CHAT_SYSTEM_PROMPT = """
ë‹¹ì‹ ì€ ì¹´ë“œë‰´ìŠ¤ ì œì‘ì„ ë•ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.
ì‚¬ìš©ìì˜ ìš”ì²­ì— ë”°ë¼ ì¹´ë“œ ì„¹ì…˜ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ì¬êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°€ëŠ¥í•œ ì‘ì—…:
1. íŠ¹ì • ì¹´ë“œì˜ ë‚´ìš© ìˆ˜ì •
2. ì¹´ë“œ ìˆœì„œ ë³€ê²½
3. ì¹´ë“œ ì¶”ê°€/ì‚­ì œ ì œì•ˆ
4. ë” ë‚˜ì€ í‘œí˜„ ì œì•ˆ

ì‚¬ìš©ìê°€ "ë‘ ë²ˆì§¸ ì¹´ë“œ"ë¼ê³  í•˜ë©´ index 1ì„ ì˜ë¯¸í•©ë‹ˆë‹¤ (0-based).
ìˆ˜ì • ì‹œ modify_section í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.
ìˆœì„œ ë³€ê²½ ì‹œ reorder_sections í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.
"""
```

---

## 4. Frontend ìƒì„¸ ì„¤ê³„

### 4.1 í˜ì´ì§€ í”Œë¡œìš°

```
1. í™ˆ í˜ì´ì§€ (/)
   â†“
2. ì†ŒìŠ¤ ì…ë ¥ (URL ë˜ëŠ” í…ìŠ¤íŠ¸)
   â†“
3. ìš”ì•½ ìƒì„± (ë¡œë”© â†’ ìš”ì•½ ê²°ê³¼ í‘œì‹œ)
   â†“
4. ì¹´ë“œë‰´ìŠ¤ ì„¹ì…˜ ìƒì„±
   â†“
5. AI ì±„íŒ…ìœ¼ë¡œ ìˆ˜ì •
   â†“
6. ì™„ë£Œ (Phase 2: Export)
```

### 4.2 í•µì‹¬ ì»´í¬ë„ŒíŠ¸

#### `components/source/SourceInput.tsx`
```typescript
import { useState } from 'react';
import { useRouter } from 'next/router';
import { createProject } from '@/services/projectService';

type SourceType = 'url' | 'text';

export default function SourceInput() {
  const [sourceType, setSourceType] = useState<SourceType>('url');
  const [content, setContent] = useState('');
  const [loading, setLoading] = useState(false);
  const router = useRouter();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);

    try {
      // í”„ë¡œì íŠ¸ ìƒì„± API í˜¸ì¶œ
      const project = await createProject({
        source_type: sourceType,
        source_content: content
      });

      // í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™
      router.push(`/project/${project.id}`);
    } catch (error) {
      console.error('í”„ë¡œì íŠ¸ ìƒì„± ì‹¤íŒ¨:', error);
      alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="max-w-2xl mx-auto p-6">
      <h1 className="text-3xl font-bold mb-8">ì¹´ë“œë‰´ìŠ¤ ì œì‘ ì‹œì‘</h1>
      
      {/* ì†ŒìŠ¤ íƒ€ì… ì„ íƒ */}
      <div className="mb-6 flex gap-4">
        <button
          onClick={() => setSourceType('url')}
          className={`px-6 py-3 rounded-lg ${
            sourceType === 'url' 
              ? 'bg-blue-600 text-white' 
              : 'bg-gray-200'
          }`}
        >
          URL ë§í¬
        </button>
        <button
          onClick={() => setSourceType('text')}
          className={`px-6 py-3 rounded-lg ${
            sourceType === 'text' 
              ? 'bg-blue-600 text-white' 
              : 'bg-gray-200'
          }`}
        >
          í…ìŠ¤íŠ¸ ì§ì ‘ ì…ë ¥
        </button>
      </div>

      {/* ì…ë ¥ í¼ */}
      <form onSubmit={handleSubmit}>
        {sourceType === 'url' ? (
          <input
            type="url"
            placeholder="https://example.com/article"
            value={content}
            onChange={(e) => setContent(e.target.value)}
            className="w-full px-4 py-3 border rounded-lg mb-4"
            required
          />
        ) : (
          <textarea
            placeholder="ì¹´ë“œë‰´ìŠ¤ë¡œ ë§Œë“¤ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."
            value={content}
            onChange={(e) => setContent(e.target.value)}
            className="w-full px-4 py-3 border rounded-lg mb-4 h-64"
            maxLength={10000}
            required
          />
        )}

        <button
          type="submit"
          disabled={loading}
          className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50"
        >
          {loading ? 'ì²˜ë¦¬ ì¤‘...' : 'ì¹´ë“œë‰´ìŠ¤ ë§Œë“¤ê¸°'}
        </button>
      </form>
    </div>
  );
}
```

#### `pages/project/[id].tsx`
```typescript
import { useEffect, useState } from 'react';
import { useRouter } from 'next/router';
import { getProject, summarizeProject, generateSections } from '@/services/projectService';
import SummaryView from '@/components/summary/SummaryView';
import CardList from '@/components/cardnews/CardList';
import ChatInterface from '@/components/chat/ChatInterface';

export default function ProjectPage() {
  const router = useRouter();
  const { id } = router.query;
  
  const [project, setProject] = useState(null);
  const [sections, setSections] = useState([]);
  const [step, setStep] = useState<'summarize' | 'generate' | 'edit'>('summarize');
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (id) {
      loadProject();
    }
  }, [id]);

  const loadProject = async () => {
    try {
      const data = await getProject(id as string);
      setProject(data);
      
      // ìƒíƒœì— ë”°ë¼ step ê²°ì •
      if (!data.summary) {
        setStep('summarize');
      } else if (sections.length === 0) {
        setStep('generate');
      } else {
        setStep('edit');
      }
    } catch (error) {
      console.error('í”„ë¡œì íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleSummarize = async () => {
    setLoading(true);
    try {
      const summary = await summarizeProject(id as string);
      setProject({ ...project, ...summary });
      setStep('generate');
    } catch (error) {
      console.error('ìš”ì•½ ì‹¤íŒ¨:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleGenerateSections = async () => {
    setLoading(true);
    try {
      const generatedSections = await generateSections(id as string);
      setSections(generatedSections);
      setStep('edit');
    } catch (error) {
      console.error('ì„¹ì…˜ ìƒì„± ì‹¤íŒ¨:', error);
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return <div className="flex justify-center items-center h-screen">ë¡œë”© ì¤‘...</div>;
  }

  return (
    <div className="container mx-auto p-6">
      {/* Step 2: ìš”ì•½ */}
      {step === 'summarize' && (
        <div>
          <h2 className="text-2xl font-bold mb-4">ì†ŒìŠ¤ ë¶„ì„ ì¤‘...</h2>
          <button
            onClick={handleSummarize}
            className="bg-blue-600 text-white px-6 py-3 rounded-lg"
          >
            ìš”ì•½ ì‹œì‘
          </button>
        </div>
      )}

      {/* Step 3: ì¹´ë“œ ìƒì„± */}
      {step === 'generate' && project?.summary && (
        <div>
          <SummaryView
            summary={project.summary}
            keywords={project.keywords}
            recommendedCardCount={project.recommended_card_count}
          />
          <button
            onClick={handleGenerateSections}
            className="mt-6 bg-blue-600 text-white px-6 py-3 rounded-lg"
          >
            ì¹´ë“œë‰´ìŠ¤ ìƒì„±
          </button>
        </div>
      )}

      {/* Step 4: í¸ì§‘ */}
      {step === 'edit' && (
        <div className="grid grid-cols-2 gap-6">
          <div>
            <h2 className="text-2xl font-bold mb-4">ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°</h2>
            <CardList sections={sections} />
          </div>
          <div>
            <h2 className="text-2xl font-bold mb-4">AIì™€ ëŒ€í™”í•˜ë©° ìˆ˜ì •</h2>
            <ChatInterface
              projectId={id as string}
              sections={sections}
              onSectionsUpdate={setSections}
            />
          </div>
        </div>
      )}
    </div>
  );
}
```

### 4.3 API ì„œë¹„ìŠ¤

#### `services/projectService.ts`
```typescript
import api from './api';

export interface Project {
  id: string;
  source_type: 'url' | 'text';
  source_content: string;
  summary?: string;
  keywords?: string[];
  created_at: string;
  updated_at: string;
  status: 'draft' | 'summarized' | 'completed';
}

export const createProject = async (data: {
  source_type: 'url' | 'text';
  source_content: string;
}): Promise<Project> => {
  const response = await api.post('/api/projects', data);
  return response.data;
};

export const getProject = async (id: string): Promise<Project> => {
  const response = await api.get(`/api/projects/${id}`);
  return response.data;
};

export const summarizeProject = async (id: string) => {
  const response = await api.post(`/api/projects/${id}/summarize`);
  return response.data;
};

export const generateSections = async (id: string) => {
  const response = await api.post(`/api/projects/${id}/sections`);
  return response.data;
};
```

---

## 5. AI í†µí•© ê°€ì´ë“œ

### 5.1 OpenAI API ì„¤ì •

#### ìš”ê¸ˆ ìµœì í™” ì „ëµ
| ëª¨ë¸ | ìš©ë„ | 1M í† í°ë‹¹ ë¹„ìš© |
|------|------|----------------|
| `gpt-4o-mini` | ìš”ì•½, í‚¤ì›Œë“œ ì¶”ì¶œ | $0.15 (ì…ë ¥) |
| `gpt-4o` | ë³µì¡í•œ ì¹´ë“œ ìƒì„± | $2.50 (ì…ë ¥) |

**ì¶”ì²œ**: Phase 1ì€ `gpt-4o-mini`ë¡œ ì‹œì‘í•˜ì—¬ ë¹„ìš© ì ˆê°

### 5.2 í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”

```python
# í† í° ê³„ì‚° (ëŒ€ëµ í•œê¸€ 1ê¸€ì = 2-3í† í°)
def estimate_tokens(text: str) -> int:
    return len(text) * 2.5

# í…ìŠ¤íŠ¸ ìë¥´ê¸°
def truncate_text(text: str, max_tokens: int = 3000) -> str:
    max_chars = int(max_tokens / 2.5)
    return text[:max_chars]
```

---

## 6. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 6.1 Firestore ì»¬ë ‰ì…˜ êµ¬ì¡°

```
firestore/
â”œâ”€â”€ projects/                    # í”„ë¡œì íŠ¸ ì»¬ë ‰ì…˜
â”‚   â”œâ”€â”€ {projectId}/            # ë¬¸ì„œ ID
â”‚   â”‚   â”œâ”€â”€ source_type         # 'url' | 'text'
â”‚   â”‚   â”œâ”€â”€ source_content      # ì›ë³¸ ì†ŒìŠ¤
â”‚   â”‚   â”œâ”€â”€ summary             # ìš”ì•½ë¬¸
â”‚   â”‚   â”œâ”€â”€ keywords            # í‚¤ì›Œë“œ ë°°ì—´
â”‚   â”‚   â”œâ”€â”€ created_at          # Timestamp
â”‚   â”‚   â”œâ”€â”€ updated_at          # Timestamp
â”‚   â”‚   â”œâ”€â”€ status              # 'draft' | 'summarized' | 'completed'
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ sections/           # í•˜ìœ„ ì»¬ë ‰ì…˜: ì¹´ë“œ ì„¹ì…˜
â”‚   â”‚   â”‚   â”œâ”€â”€ {sectionId}/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ order       # ìˆœì„œ (ì •ìˆ˜)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ type        # 'title' | 'content' | 'closing'
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ title       # ì œëª©
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ content     # ë‚´ìš©
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ image_url   # ì´ë¯¸ì§€ URL (Phase 2)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ design_config # ë””ìì¸ ì„¤ì • (Map)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ conversations/      # í•˜ìœ„ ì»¬ë ‰ì…˜: AI ëŒ€í™” ì´ë ¥
â”‚   â”‚       â”œâ”€â”€ {conversationId}/
â”‚   â”‚       â”‚   â”œâ”€â”€ user_message
â”‚   â”‚       â”‚   â”œâ”€â”€ ai_response
â”‚   â”‚       â”‚   â””â”€â”€ timestamp
```

### 6.2 ì¸ë±ìŠ¤ ì„¤ì •

Firestore Consoleì—ì„œ ìƒì„±:
- `projects` - `created_at` (DESC)
- `sections` - `order` (ASC)
- `conversations` - `timestamp` (ASC)

---

## 7. API ìƒì„¸ ëª…ì„¸

### 7.1 í”„ë¡œì íŠ¸ API

#### POST /api/projects
**ì„¤ëª…**: ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±

**Request Body**:
```json
{
  "source_type": "url",
  "source_content": "https://example.com/article"
}
```

**Response (201)**:
```json
{
  "id": "proj_abc123",
  "source_type": "url",
  "source_content": "https://example.com/article",
  "summary": null,
  "keywords": null,
  "created_at": "2025-10-23T10:00:00Z",
  "updated_at": "2025-10-23T10:00:00Z",
  "status": "draft"
}
```

#### POST /api/projects/{id}/summarize
**ì„¤ëª…**: í”„ë¡œì íŠ¸ ì†ŒìŠ¤ ìš”ì•½

**Response (200)**:
```json
{
  "summary": "ì´ ê¸°ì‚¬ëŠ” AI ê¸°ìˆ ì˜ ë°œì „ì— ëŒ€í•´ ë‹¤ë£¹ë‹ˆë‹¤...",
  "keywords": ["AI", "ê¸°ìˆ ", "ë°œì „", "ë¯¸ë˜", "í˜ì‹ "],
  "recommended_card_count": 5
}
```

#### POST /api/projects/{id}/sections
**ì„¤ëª…**: ì¹´ë“œë‰´ìŠ¤ ì„¹ì…˜ ìë™ ìƒì„±

**Response (200)**:
```json
{
  "sections": [
    {
      "id": "sec_1",
      "order": 0,
      "type": "title",
      "title": "AI ê¸°ìˆ ì˜ ë¯¸ë˜",
      "content": "ìš°ë¦¬ ì‚¶ì„ ë°”ê¿€ í˜ì‹ "
    },
    {
      "id": "sec_2",
      "order": 1,
      "type": "content",
      "title": "í•µì‹¬ ê¸°ìˆ ",
      "content": "ë¨¸ì‹ ëŸ¬ë‹ê³¼ ë”¥ëŸ¬ë‹ì´ ì£¼ë„í•˜ëŠ” ë³€í™”..."
    }
  ]
}
```

### 7.2 ì±„íŒ… API

#### POST /api/chat
**Request**:
```json
{
  "project_id": "proj_abc123",
  "user_message": "ë‘ ë²ˆì§¸ ì¹´ë“œë¥¼ ë” ê°„ê²°í•˜ê²Œ ë§Œë“¤ì–´ì¤˜",
  "current_sections": [...],
  "conversation_history": [...]
}
```

**Response**:
```json
{
  "ai_response": "ë‘ ë²ˆì§¸ ì¹´ë“œì˜ ë‚´ìš©ì„ ê°„ê²°í•˜ê²Œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.",
  "updated_sections": [...],
  "action_taken": "modify"
}
```

---

## 8. ë°°í¬ ê°€ì´ë“œ

### 8.1 Backend ë°°í¬ (Google Cloud Run)

#### Step 1: Dockerfile ì‘ì„±
```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY ./app ./app

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8080"]
```

#### Step 2: Cloud Run ë°°í¬
```bash
# Google Cloud í”„ë¡œì íŠ¸ ì„¤ì •
gcloud config set project YOUR_PROJECT_ID

# ì´ë¯¸ì§€ ë¹Œë“œ
gcloud builds submit --tag gcr.io/YOUR_PROJECT_ID/cardnews-backend

# Cloud Run ë°°í¬
gcloud run deploy cardnews-backend \
  --image gcr.io/YOUR_PROJECT_ID/cardnews-backend \
  --platform managed \
  --region asia-northeast3 \
  --allow-unauthenticated \
  --set-env-vars OPENAI_API_KEY=sk-xxx
```

### 8.2 Frontend ë°°í¬ (Firebase Hosting)

```bash
cd frontend
npm run build
firebase deploy --only hosting
```

---

## 9. í…ŒìŠ¤íŠ¸ ì „ëµ

### 9.1 Backend í…ŒìŠ¤íŠ¸

#### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (`pytest`)
```python
# tests/test_scraper.py
import pytest
from app.services.scraper import WebScraper

def test_scrape_url():
    scraper = WebScraper()
    result = scraper.scrape_url('https://example.com')
    
    assert 'title' in result
    assert 'content' in result
    assert len(result['content']) > 0

# tests/test_summarizer.py
def test_summarize():
    summarizer = AISummarizer()
    text = "ê¸´ í…ìŠ¤íŠ¸..." * 100
    
    result = summarizer.summarize(text)
    
    assert len(result['summary']) <= 200
    assert len(result['keywords']) > 0
```

#### í†µí•© í…ŒìŠ¤íŠ¸
```python
# tests/test_api.py
from fastapi.testclient import TestClient
from app.main import app

client = TestClient(app)

def test_create_project():
    response = client.post('/api/projects', json={
        'source_type': 'text',
        'source_content': 'í…ŒìŠ¤íŠ¸ ë‚´ìš©ì…ë‹ˆë‹¤.'
    })
    
    assert response.status_code == 201
    assert 'id' in response.json()
```

### 9.2 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

| ëª¨ë“ˆ | ëª©í‘œ ì»¤ë²„ë¦¬ì§€ |
|------|---------------|
| Services | 90%+ |
| Routers | 80%+ |
| Utils | 85%+ |
| **ì „ì²´** | **80%+** |

#### ì»¤ë²„ë¦¬ì§€ ì¸¡ì •
```bash
pytest --cov=app --cov-report=html
```

---

## 10. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 10.1 API í‚¤ ë³´í˜¸
- âœ… `.env` íŒŒì¼ ì‚¬ìš© (ì ˆëŒ€ ì»¤ë°‹í•˜ì§€ ì•Šê¸°)
- âœ… `.gitignore`ì— `.env` ì¶”ê°€
- âœ… Cloud Run í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…

### 10.2 ì…ë ¥ ê²€ì¦
- âœ… URL ìœ íš¨ì„± ê²€ì‚¬
- âœ… í…ìŠ¤íŠ¸ ê¸¸ì´ ì œí•œ (10,000ì)
- âœ… SQL Injection ë°©ì§€ (FirestoreëŠ” NoSQLì´ë¯€ë¡œ ëœ ìœ„í—˜)

### 10.3 Rate Limiting
```python
from slowapi import Limiter
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)

@app.post("/api/projects")
@limiter.limit("5/minute")  # ë¶„ë‹¹ 5íšŒ ì œí•œ
async def create_project():
    ...
```

---

## 11. ì„±ëŠ¥ ìµœì í™”

### 11.1 ìºì‹± ì „ëµ
- **Redis**: ìš”ì•½ ê²°ê³¼ ìºì‹± (ê°™ì€ URL ì¬ìš”ì²­ ì‹œ)
- **CDN**: Firebase Hostingì€ ìë™ CDN ì œê³µ

### 11.2 ë¹„ë™ê¸° ì²˜ë¦¬
```python
# ê¸´ ì‘ì—…ì€ ë°±ê·¸ë¼ìš´ë“œë¡œ
from fastapi import BackgroundTasks

@app.post("/api/projects/{id}/summarize")
async def summarize(id: str, background_tasks: BackgroundTasks):
    background_tasks.add_task(run_summarization, id)
    return {"message": "ìš”ì•½ ì‘ì—…ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤."}
```

---

## ë¶€ë¡

### A. í™˜ê²½ ë³€ìˆ˜ ì „ì²´ ëª©ë¡

#### Backend (.env)
```env
# OpenAI
OPENAI_API_KEY=sk-xxx
OPENAI_MODEL=gpt-4o-mini

# Firebase
FIREBASE_PROJECT_ID=cardnews-xxxxx
FIREBASE_PRIVATE_KEY_PATH=./serviceAccountKey.json

# Server
BACKEND_PORT=8000
ALLOWED_ORIGINS=http://localhost:3000,https://cardnews.web.app

# Limits
MAX_TEXT_LENGTH=10000
RATE_LIMIT_PER_MINUTE=10

# Debug
DEBUG=True
LOG_LEVEL=INFO
```

#### Frontend (.env.local)
```env
NEXT_PUBLIC_API_URL=https://cardnews-backend-xxx.run.app
NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSyXXX
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=cardnews-xxxxx.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=cardnews-xxxxx
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=cardnews-xxxxx.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789
NEXT_PUBLIC_FIREBASE_APP_ID=1:123456789:web:xxx
```

---

**ë¬¸ì„œ ë²„ì „**: 1.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-23  
**ì‘ì„±ì**: CardNews AI Development Team

